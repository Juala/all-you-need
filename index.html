<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Order Layanan By Roja</title>
<style>
body{font-family:Arial, sans-serif;background:#f5f5f5;padding:20px;margin:0;}
.container{max-width:450px;margin:auto;background:#fff;padding:20px;border-radius:12px;box-shadow:0 0 10px rgba(0,0,0,0.1);}
label{font-weight:bold;display:block;margin-top:10px;}
select,input{width:100%;padding:10px;margin-top:5px;border-radius:8px;border:1px solid #ccc;}
button{margin-top:18px;width:100%;padding:12px;border:none;border-radius:8px;background:#000;color:#fff;font-size:17px;font-weight:bold;cursor:pointer;}
.hidden{display:none;}
.price-box{margin-top:10px;font-size:18px;font-weight:bold;color:#008000;}
.loading{color:#007bff;font-weight:bold;margin-top:8px;display:none;}
</style>
</head>
<body>

<div class="container">
<h2>Form Pesanan RojaServer</h2>

<form id="orderForm">

<label>Metode Order:</label>
<select id="metodeOrder">
  <option value="biasa">Order Biasa</option>
  <option value="fast">Order FAST (Premiumku)</option>
</select>

<!-- ================= ORDER BIASA ================= -->
<div id="normalBox">

<label>Pilih Produk:</label>
<select id="product">
  <option value="">-- Pilih Produk --</option>
  <option value="followers_ig">Followers Instagram Indonesia</option>
  <option value="followers_tt">Followers TikTok Indonesia</option>
  <option value="likes_ig">Like Instagram Indonesia</option>
  <option value="likes_tt">Like TikTok Indonesia</option>
  <option value="app_prem">App Premium</option>
</select>

<div id="jumlahBox" class="hidden">
  <label>Pilih Jumlah / Paket:</label>
  <select id="jumlah"></select>
</div>

<label id="labelUsername" class="hidden">Username / Link Profil:</label>
<input type="text" id="username" class="hidden">

<label>Nomor WhatsApp:</label>
<input type="text" id="phone">

<div id="priceDisplay" class="price-box hidden"></div>

<button type="submit">Order Sekarang</button>
</div>

<!-- ================= FAST MODE ================= -->
<div id="fastBox" class="hidden">

<label>Pilih Produk FAST:</label>
<select id="fastProduct"></select>
<div id="loadingFast" class="loading">Memuat produk FAST...</div>

<div id="stockInfo" style="margin-top:8px;font-size:14px;"></div>

<label>Jumlah:</label>
<input type="number" id="fastQty" min="1" value="1">

<label>Nomor WhatsApp Target:</label>
<input type="text" id="fastWa" placeholder="628xxxx">

<button type="button" id="fastOrderBtn">BUAT ORDER FAST</button>

<div id="fastResult" style="margin-top:15px;font-size:14px;"></div>
</div>

</form>
</div>

<script>
/* ================= HARGA ORDER BIASA ================= */
const harga = {
 followers_ig:{100:11000,200:22000,300:33000,400:44000,500:55000,1000:110000,2000:220000,5000:550000,10000:1100000},
 followers_tt:{100:10000,200:20000,300:30000,400:40000,500:50000,1000:100000,2000:200000,5000:500000,10000:1000000},
 likes_ig:{100:5000,200:10000,300:15000,400:20000,500:25000,1000:50000,2000:100000,5000:250000,10000:500000},
 likes_tt:{100:6000,200:12000,300:18000,400:24000,500:30000,1000:60000,2000:120000,5000:300000,10000:600000},
 app_prem:{
  "Netflix 1 Bulan":45000,
  "Spotify Premium 1 Bulan (No Garansi)":15000,
  "Spotify Premium 1 Bulan (Full Garansi)":30000,
  "Alight Motion Premium 1 Tahun":10000,
  "YouTube Premium Famplan 1 Bulan":10000,
  "YouTube Premium Mixplan 1 Bulan":17000,
  "YouTube Premium Famplan 2 Bulan":20000,
  "YouTube Premium Mixplan 3 Bulan":36000,
  "YouTube Premium Mixplan + email 3 Bulan":40000,
  "Capcut Premium 1 Bulan":20000,
  "Gemini Premium 1 Tahun + 2TB":35000,
  "GPT Premium 1 Bulan":30000,
  "Vidio Premium 1 Bulan (TV)":30000,
  "Vidio Premium 1 Bulan (Mobile)":35000,
  "Vidio Premium 1 Bulan (All Device)":42000,
  "Canva Premium 1 Bulan":5000,
  "Canva Premium 1 Bulan + Designer":10000
 }
};

/* ================= ELEMENT ================= */
const metodeOrder = document.getElementById("metodeOrder");
const normalBox = document.getElementById("normalBox");
const fastBox = document.getElementById("fastBox");

const product = document.getElementById("product");
const jumlah = document.getElementById("jumlah");
const jumlahBox = document.getElementById("jumlahBox");
const priceDisplay = document.getElementById("priceDisplay");
const username = document.getElementById("username");
const labelUsername = document.getElementById("labelUsername");

/* ================= ORDER BIASA LOGIC ================= */
product.addEventListener("change",()=>{
  const p = product.value;
  jumlah.innerHTML = "";
  priceDisplay.classList.add("hidden");

  if(!p) return;

  if(p.includes("followers") || p.includes("likes")){
    username.classList.remove("hidden");
    labelUsername.classList.remove("hidden");
  } else {
    username.classList.add("hidden");
    labelUsername.classList.add("hidden");
  }

  jumlahBox.classList.remove("hidden");

  const list = harga[p];
  Object.keys(list).forEach(i=>{
    jumlah.innerHTML += `<option value="${i}">${i}</option>`;
  });

  const updatePrice = ()=>{
    priceDisplay.textContent = "Total: Rp " + list[jumlah.value].toLocaleString();
    priceDisplay.classList.remove("hidden");
  };

  jumlah.addEventListener("change", updatePrice);
  updatePrice();
});

/* ================= FAST CONFIG ================= */
const API_KEY = "b946c6d83873d1c4ab5906554ea45d39";
const API_BASE = "https://premiumku.store/api/";

const fastProduct = document.getElementById("fastProduct");
const fastQty = document.getElementById("fastQty");
const fastWa = document.getElementById("fastWa");
const fastOrderBtn = document.getElementById("fastOrderBtn");
const fastResult = document.getElementById("fastResult");
const stockInfo = document.getElementById("stockInfo");
const loadingFast = document.getElementById("loadingFast");

/* ================= SWITCH MODE ================= */
metodeOrder.addEventListener("change",()=>{
  if(metodeOrder.value==="fast"){
    normalBox.classList.add("hidden");
    fastBox.classList.remove("hidden");
    loadFastProducts();
  } else {
    fastBox.classList.add("hidden");
    normalBox.classList.remove("hidden");
  }
});

/* ================= FAST PRODUCTS ================= */
async function loadFastProducts(){
  loadingFast.style.display="block";
  const res = await fetch(API_BASE+"products",{
    method:"POST",
    headers:{ "Content-Type":"application/json" },
    body: JSON.stringify({ api_key: API_KEY })
  });
  const data = await res.json();
  loadingFast.style.display="none";

  fastProduct.innerHTML = `<option value="">-- Pilih Produk FAST --</option>`;
  data.products.forEach(p=>{
    if(p.status==="available"){
      fastProduct.innerHTML += `<option value="${p.id}">${p.name} - Rp ${p.price.toLocaleString()}</option>`;
    }
  });
}

/* ================= CEK STOK ================= */
fastProduct.addEventListener("change",async()=>{
  if(!fastProduct.value) return;
  const res = await fetch(API_BASE+"stock",{
    method:"POST",
    headers:{ "Content-Type":"application/json" },
    body: JSON.stringify({
      api_key: API_KEY,
      product_id: Number(fastProduct.value)
    })
  });
  const data = await res.json();
  stockInfo.innerHTML = `Stok tersedia: <b>${data.stock}</b>`;
  fastQty.max = data.stock;
});

/* ================= CREATE FAST ORDER ================= */
fastOrderBtn.addEventListener("click",async()=>{
  fastResult.innerHTML="‚è≥ Memproses...";
  const res = await fetch(API_BASE+"order",{
    method:"POST",
    headers:{ "Content-Type":"application/json" },
    body: JSON.stringify({
      api_key: API_KEY,
      product_id: Number(fastProduct.value),
      qty: Number(fastQty.value),
      whatsapp: fastWa.value
    })
  });
  const data = await res.json();

  if(!data.success){
    fastResult.innerHTML = `<span style="color:red">${data.message}</span>`;
    return;
  }

  fastResult.innerHTML = `
    <b>ORDER BERHASIL</b><br>
    Invoice: ${data.invoice}<br>
    Total: Rp ${data.total.toLocaleString()}<br>
    Status: Diproses...
  `;
});
</script>

</body>
</html>
